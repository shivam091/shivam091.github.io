@use "abstracts/tokens" as *
@use "abstracts/modules/list-unstyled"
@use "abstracts/modules/text-truncate"
@use "abstracts/mixins/breakpoints" as breakpoint
@use "abstracts/mixins/transition-properties" as *

$separator-height: $size-huge

.timeline-wrapper
  display: flex
  flex-direction: column

.timeline-posts
  @extend %list-unstyled

.timeline-year,
.timeline-post
  display: flex
  align-items: center
  position: relative
  gap: $space-sm
  padding-inline: $space-sm
  padding-block: $space-sm
  border-radius: $border-radius-default
  border: $border-width-default solid var(--color-border-transparent)
  z-index: 2

.timeline-post
  background-image: linear-gradient(var(--color-bg-accent-muted), var(--color-bg-accent-muted))
  border-color: var(--color-border-accent-muted)
  margin-bottom: $space-base
  box-shadow: var(--box-shadow-sm)

  @include transition-properties(box-shadow, $duration: $motion-duration-default, $easing: $motion-easing-ease)

  @include breakpoint.max(md)
    .timeline-left
      font-size: 0.85rem

  &:hover
    box-shadow: var(--box-shadow-md)

.timeline-left
  flex: 0 0 5.5rem
  text-align: right
  font-weight: $font-weight-medium
  font-variant-numeric: tabular-nums
  color: var(--color-fg-muted)
  white-space: nowrap

  @include breakpoint.max(md)
    flex: 0 0 4rem

.timeline-year
  .timeline-left
    color: var(--color-fg-default)
    margin-block: $space-sm

  .timeline-seperator
    &::before
      width: $size-base
      height: $size-base
      background: var(--color-bg-accent-emphasis)
      box-shadow: 0 0 8px 2px var(--color-fg-accent)

.timeline-seperator
  flex: 0 0 2rem
  display: flex
  justify-content: center
  align-items: center
  position: relative
  z-index: 1

  &::before
    content: ""
    width: $size-md
    height: $size-md
    background: var(--color-fg-accent)
    border: $border-width-medium solid var(--color-border-default)
    box-shadow: 0 0 8px 1px var(--color-fg-accent)
    border-radius: $border-radius-full
    z-index: 2

  &::after
    content: ""
    position: absolute
    top: 50%
    left: 50%
    transform: translate(-50%, -50%)
    width: $size-xxxs
    height: $separator-height
    background: var(--color-border-default)
    z-index: 1

    .timeline-year:first-of-type &
      transform: translate(-50%, 0)
      height: calc($separator-height / 2)

    .timeline-year:last-of-type + .timeline-posts li:last-child &
      transform: translate(-50%, -100%)
      height: calc($separator-height / 2)

.timeline-right
  flex: 1
  font-weight: $font-weight-medium

  @extend %text-truncate
