@use "abstracts/animations/slide-in" as *
@use "abstracts/animations/slide-out" as *
@use "abstracts/mixins/overlay" as *

.sidebar
  position: fixed
  top: 0
  left: 0
  width: var(--layout-offset-lg)
  height: 100vh
  background-image: url("./../assets/img/my-profile-img.png")
  background-position: center center
  background-repeat: no-repeat
  background-size: cover
  color: var(--fgColor-white)
  z-index: 999
  padding-top: calc(env(safe-area-inset-top) + 1rem)
  padding-bottom: calc(env(safe-area-inset-bottom) + 1rem)
  box-sizing: border-box
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.5)
  max-height: 100vh
  transform: translateX(0)
  transition: transform 0.3s ease
  will-change: transform

  @include overlay(rgba(0, 0, 0, 0.6))

  @media (max-width: 1024px)
    width: var(--layout-offset-md)

  @media (max-width: 768px)
    width: var(--layout-offset-sm)
    padding: 1rem 0.5rem

    &[data-state="idle"],
    &:not([data-state])
      transform: translateX(-100%)
      opacity: 0
      pointer-events: none

    &[data-state="open"]
      animation: slideIn 0.4s ease forwards
      pointer-events: auto

    &[data-state="close"]
      animation: slideOut 0.4s ease forwards
      pointer-events: none

.sidebar-content
  position: relative
  z-index: 2
  display: flex
  flex-direction: column
  padding: 0rem 1rem

  @media (max-width: 768px)
    padding: 0

.sidebar-top
  text-align: center

  .profile-pic
    margin-bottom: 0.5rem

.site-title
  font-size: clamp(1.25rem, 2.5vw, 1.75rem)
  font-weight: 700
  color: var(--fgColor-white)
  margin: 0.5rem 0
  letter-spacing: 0.5px

.site-subtitle
  font-size: clamp(0.55rem, 1.2vw, 0.9rem)
  font-style: italic
  color: var(--fgColor-white)
  margin-bottom: 1rem
  filter: brightness(0.8)

.sidebar-social
  margin-bottom: 1rem
  display: flex
  gap: 0.5rem
  flex-wrap: wrap
  justify-content: center
  align-items: center

  @media (max-width: 768px)
    margin-bottom: 0.5rem

.social-icon
  width: clamp(1.75rem, 3vw, 2.25rem)
  height: clamp(1.75rem, 3vw, 2.25rem)
  border-radius: 6px
  display: flex
  align-items: center
  justify-content: center
  text-decoration: none

.sidebar-nav
  display: flex
  flex-direction: column
  gap: 0.5rem

  @media (max-width: 768px)
    padding: 0rem 0.25rem

.sidebar-nav-link
  color: var(--fgColor-white)
  padding: 0.75rem 1rem
  display: inline-flex
  align-items: center
  gap: 0.5rem
  transition: background-color 0.3s ease, color 0.3s ease
  will-change: background-color, color
  border-radius: 0.5rem

  &:hover,
  &:focus-visible
    color: var(--fgColor-onEmphasis)
    background-color: hsla(0, 0%, 100%, .1)
    border-left: 2px solid var(--borderColor-accent-emphasis)
    text-decoration: none

  @media (max-width: 768px)
    font-size: 0.9rem
    padding: 0.5rem 0.75rem

.sidebar-toggle
  position: fixed
  top: 0.5rem
  right: var(--floating-button-right-offset)
  z-index: 1010
  background-color: var(--bgColor-accent-emphasis)
  border: none
  padding: 0.75rem
  border-radius: 50%
  cursor: pointer
  display: none
  width: 48px
  height: 48px

  .icon-bar
    width: 24px
    height: 2px
    background-color: var(--fgColor-white)
    transition: transform 0.3s ease, opacity 0.3s ease
    transform-origin: center

    &:first-of-type
      margin-top: 0

  .middle-bar
    opacity: 1

  .top-bar,
  .bottom-bar
    transform: rotate(0)

  &[data-state="open"]
    .middle-bar
      opacity: 0

    .top-bar
      transform: translateY(7px) rotate(45deg)

    .bottom-bar
      transform: translateY(-7px) rotate(-45deg)

  @media (max-width: 768px)
    display: flex
    flex-direction: column
    justify-content: center
    align-items: center
    gap: 5px
    right: 1rem

.sidebar-bottom
  padding-inline: 2rem
  position: fixed
  bottom: 2rem
  left: 0
  width: 100%
  display: flex
  flex-direction: row
  align-items: center
  justify-content: center
  text-align: center

  .bottom-link
    color: var(--fgColor-white)

    &:hover,
    &:focus-visible
      color: var(--fgColor-onEmphasis)
      text-decoration: none

.theme-switcher
  display: grid
  align-self: center
